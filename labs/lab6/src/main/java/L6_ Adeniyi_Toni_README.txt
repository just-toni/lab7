# Lab6

* *Date Created*: 24 OCT 2024
* *Last Modification Date*: 02 NOV 2024
* *Git URL*: <https://git.cs.dal.ca/oadeniyi/csci-3172/-/tree/main/labs/lab6>
File Path: lab6/Weather.txt


## Authors

* [Toni Adeniyi](toni.adeniyi@dal.ca) - (Author)


## Built With

<!--- Provide a list of the frameworks used to build this application, your list should include the name of the framework used, the url where the framework is available for download and what the framework was used for, see the example below --->

* [Web Driver Manager](https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager/5.1.0) - web driver manager
* [Maven](https://maven.apache.org/) - Dependency Management
* [ChromeDriver] (https://chromedriver.storage.googleapis.com/index.html?path=100.0.4896.20/ ) - chrome driver
* [Selium](https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java/4.1.2) - maven selium


## Artificial Intelligence Tools Used
If in completing your lab / assignment / project you used any Artificial Intelligence Tools or Plugins, then provide a list of the tools or plugins used, the prompt used, the code generated by the AI, where the code was implemented, how it was implemented, why it was implemented, and how it was modified. See the sections below for more details.

* [ChatGPT](https://chatgpt.com/) - The AI Tool used


### Prompt Used on *NAME OF AI TOOL*

```
what is wrong with this code
package org.example;

import org.openqa.selenium.By;
import org.openqa.selenium.InvalidSelectorException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import io.github.bonigarcia.wdm.WebDriverManager;
import org.openqa.selenium.chrome.ChromeOptions;

import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

public class Main {
    public static void main(String[] args) {
        WebDriverManager.chromedriver().setup();
        ChromeOptions options = new ChromeOptions();
        File file = new File("chromedriver.exe");
        System.setProperty("webdriver.chrome.driver", file.toString());
//        options.setBinary(file)
        options.addArguments("--headless");
        options.addArguments("--remote-allow-origins=*");

        WebDriver driver = new ChromeDriver(options);
        try {
//        navigates to the given url
            driver.get("https://weather.gc.ca/canada_e.html");
//        finding elements
//        by id(), by classname and by tagname()
            WebElement element = driver.findElement(By.className("table-responsive"));
//            WebElement elements = driver.findElement(By.tagName("tr"));
//        retrieve multiple elements
            List<WebElement> elements = driver.findElements(By.tagName("td"));
            List<String> finalList = new ArrayList<>();
            FileWriter file2 = new FileWriter("Weather.txt");
//            System.out.println(elements.get(1).getText());
            for (int i = 0; i < elements.size(); i++) {
                if((elements.get(i).getText().startsWith("Calgary") ||elements.get(i).getText().startsWith("Halifax") || elements.get(i).getText().startsWith("Mon")
                || elements.get(i).getText().startsWith("Toronto") ||elements.get(i).getText().startsWith("Vancouver"))){
                    String city = elements.get(i).getText();
                    String temp = elements.get(i+2).getText();
                    System.out.println(city);
                    System.out.println(temp);
                    try{
                        file2.write("City: " + city + "\t\t\t" + "Weather: " + temp + "\n");
                    } catch(IOException e){
                        System.out.println("Error writing into file" + e.getMessage());
                    }
                }
//                    if(elements.get(i).getText().startsWith())

            }
//            if element at i contains cloudy, sunny or rain don't add it
            System.out.println(finalList);
            List<WebElement> all = new ArrayList<>();

//            for (WebElement row : elements
//                 ) {
//                all.add(row);
//                String result = row.findElement(By.tagName("td")).getText();
//                System.out.println(row.getText());
//            }
//            System.out.println(all.get(5).getText());
//        extract information
//            System.out.println(elements);
            String text = element.getText();
//            System.out.println(text);
        }
        catch (IOException e){
            System.out.println("Exception is: "+ e.getMessage());
        }
        catch (InvalidSelectorException e){
            System.out.println("Error message: " + e.getMessage());
        } finally{
            driver.quit();
        }


    }
}
```

The code prompt above was used [NAME](link) to generate the code shown below:

```
package org.example;

import org.openqa.selenium.By;
import org.openqa.selenium.InvalidSelectorException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import io.github.bonigarcia.wdm.WebDriverManager;
import org.openqa.selenium.chrome.ChromeOptions;

import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

public class Main {
    public static void main(String[] args) {
        WebDriverManager.chromedriver().setup();
        ChromeOptions options = new ChromeOptions();
        options.addArguments("--headless");
        options.addArguments("--remote-allow-origins=*");

        WebDriver driver = new ChromeDriver(options);

        try (FileWriter fileWriter = new FileWriter("Weather.txt")) {
            // Navigate to the given URL
            driver.get("https://weather.gc.ca/canada_e.html");

            // Find all table cells
            List<WebElement> elements = driver.findElements(By.tagName("td"));
            List<String> cities = List.of("Calgary", "Halifax", "Montreal", "Toronto", "Vancouver");

            // Extract and write data for each specified city
            for (int i = 0; i < elements.size(); i++) {
                String cellText = elements.get(i).getText();
                if (cities.stream().anyMatch(cellText::startsWith)) {
                    String city = cellText;
                    String temp = (i + 2 < elements.size()) ? elements.get(i + 2).getText() : "N/A";

                    System.out.println("City: " + city + ", Temperature: " + temp);
                    fileWriter.write("City: " + city + "\tTemperature: " + temp + "\n");
                }
            }

        } catch (IOException e) {
            System.out.println("IOException: " + e.getMessage());
        } catch (InvalidSelectorException e) {
            System.out.println("InvalidSelectorException: " + e.getMessage());
        } finally {
            driver.quit();
        }
    }
}

```

#### File Name
*Line 32*

```
try( FileWriter file2 = new FileWriter("Weather.txt")){
```

- <!---How---> The code in [ChatGPT](https://chatgpt.com/) was implemented by adding a try catch block for when i create my file
- <!---Why---> [ChatGPT](https://chatgpt.com/))'s Code was used because I needed to figure out what was wrong in my code
- <!---How---> [ChatGPT](https://chatgpt.com/))'s Code was modified by just using the try catch block when i was creating my file and also removing comments and unnecessary code


## Acknowledgments

* Lab slides
